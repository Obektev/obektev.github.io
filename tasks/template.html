<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="styles.css">
        <link rel="stylesheet" href="../staff/background.css">
        <link rel="icon" href="../img/logo.png"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
        <link rel="stylesheet" href="vs2015.css">
        <meta charset="UTF-8">
    </head>
    <body>
        <div class="content">
            <p id="title">ACMP - Solutions</p>
            <div class="card">
                <div>
                    <div id="solution-language"></div>
                    <div id="solution-result"></div>
                </div>
                <div id="copy-text">üëÜ –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</div>
            </div>
        </div>

        <div class="footer">
            <!--<h4>Credits:</h4>-->
            <p><a href="https://github.com/Obektev" target="_blank">Obektev</a> - –∞–≤—Ç–æ—Ä —ç—Ç–æ–≥–æ —Å–∞–π—Ç–∞</p>
            <p>2024</p>
        </div>

    <script>

        async function fetchSolution(taskNumber) {
            try {
                const response = await fetch('../staff/solutions.json');
                const data = await response.json();
                return data.find(task => task.task_number === taskNumber);
            } catch (error) {
                console.error('Error fetching the solutions:', error);
                return null;
            }
        }

        async function displaySolution() {
            const urlParams = new URLSearchParams(window.location.search);
            const taskNumber = urlParams.get('task_number');
            if (!taskNumber) {
                document.querySelector('.card').innerHTML = '<p>Task number is not provided.</p>';
                return;
            }

            const solution = await fetchSolution(taskNumber);
            if (!solution) {
                document.querySelector('.card').innerHTML = '<p>Solution not found.</p>';
                return;
            }

            document.title = solution.title;
            document.getElementById('title').textContent = solution.title;

            let code = solution.code.replaceAll('<', '&lt;').replaceAll('>', '&gt;');


            const card = document.querySelector('.card');

            card.innerHTML = "<pre><code class='language-" + solution.language + "'>" + code + "</pre>" + card.innerHTML;

            document.getElementById('copy-text').onclick = () => {
                document.getElementById('copy-text').innerHTML = "–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞";
                navigator.clipboard.writeText(solution.code);
            };

            hljs.highlightAll();

            const lang = solution.language.replace('cpp', 'c++');
            const res = solution.result;

            document.getElementById("solution-language").innerHTML = `–Ø–∑—ã–∫ —Ä–µ—à–µ–Ω–∏—è: <font color='#FFD700'>${lang[0].toUpperCase() + lang.slice(1, lang.length)}</font>`;
            document.getElementById("solution-result").innerHTML = `–Ø–∑—ã–∫ —Ä–µ—à–µ–Ω–∏—è: <font color='#228B22'>${res}</font>`;

        }

        displaySolution();

    </script>

    </body>
</html>